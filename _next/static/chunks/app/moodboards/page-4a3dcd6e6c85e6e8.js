(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{763:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>N});var i=a(5155),l=a(5695),r=a(2115),n=a(6695),t=a(285),c=a(8539),o=a(5937),d=a(2177),m=a(221),x=a(5594),h=a(7313),u=a(8856),f=a(596),j=a(3686),p=a(6874),g=a.n(p);let b=x.z.object({feedback:x.z.string().min(10,{message:"Feedback must be at least 10 characters."})});function y(){let[e,s]=(0,r.useState)({}),[a,x]=(0,r.useState)(!0),[p,y]=(0,r.useState)(!0),N=(0,l.useRouter)(),{sessionState:w,setCustomerProfile:v,addFeedback:k,addRecommendation:E,getSessionId:B,loadSession:C}=(0,j.w)(),R=(0,d.mN)({resolver:(0,m.u)(b),defaultValues:{feedback:""}});r.useEffect(()=>{s(Object.fromEntries(new URLSearchParams(window.location.search).entries()))},[]),(0,r.useEffect)(()=>{let s=async()=>{let s=e.session;if(s){C(s),x(!1);return}if(w.customerProfile){x(!1);return}if(x(!0),0===Object.keys(e).length&&""===new URLSearchParams(window.location.search).toString()){N.push("/");return}try{var a;let s=function(e){var s,a;let i=e.projectType||"Room redesign",l=(null===(s=e.spaces)||void 0===s?void 0:s.split(","))||["Living room"],r=e.budget||"Moderate budget",n=(null===(a=e.designStyles)||void 0===a?void 0:a.split(","))||["Modern","Minimalist"];return"Customer is interested in a ".concat(i.toLowerCase()," for their ").concat(l.join(", "),". \nThey have a ").concat(r.toLowerCase()," and prefer ").concat(n.join(", ")," design styles. \nThey value comfort, functionality, and aesthetically pleasing spaces.")}(e);v(s),(a=0,[{item:"Mid-century modern sofa",explanation:"A comfortable yet stylish centerpiece for your living room that aligns with your modern aesthetic preferences."},{item:"Minimalist coffee table",explanation:"Clean lines and functional design make this piece perfect for your space and it fits well with your design preferences."},{item:"Scandinavian-inspired lighting",explanation:"Provides warm ambient lighting while maintaining the clean aesthetic you prefer."}]).forEach(e=>{E({item:e.item,explanation:e.explanation})})}catch(e){console.error("Error initializing session:",e),(0,f.o)({title:"Error",description:"Failed to initialize your design session. Please try again.",variant:"destructive"})}finally{x(!1)}};Object.keys(e).length>0&&s()},[e,N,w.customerProfile,v,E,C]);let S=async e=>{try{k(e.feedback,!0),R.reset(),(0,f.o)({title:"Feedback submitted",description:"Your feedback has been sent to our design team."}),y(!0)}catch(e){console.error("Error submitting feedback:",e),(0,f.o)({title:"Error",description:"Failed to submit your feedback. Please try again.",variant:"destructive"})}},{recommendations:z,moodboards:P,customerProfile:Z,feedback:T}=w;return a?(0,i.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:(0,i.jsxs)("main",{className:"flex flex-col items-center justify-center w-full flex-1 px-20 text-center",children:[(0,i.jsxs)("h1",{className:"text-4xl font-bold",children:["Preparing Your ",(0,i.jsx)("span",{className:"text-primary",children:"Design Experience"})]}),(0,i.jsxs)("div",{className:"mt-8 space-y-4 w-full max-w-3xl",children:[(0,i.jsx)(u.E,{className:"h-12 w-full"}),(0,i.jsx)(u.E,{className:"h-48 w-full"}),(0,i.jsx)(u.E,{className:"h-48 w-full"})]})]})}):(0,i.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:(0,i.jsxs)("main",{className:"flex flex-col items-center justify-center w-full flex-1 px-4 md:px-20 text-center",children:[(0,i.jsxs)("h1",{className:"text-4xl font-bold",children:["Your ",(0,i.jsx)("span",{className:"text-primary",children:"Design Recommendations"})]}),p&&(0,i.jsxs)("div",{className:"mt-4 p-4 bg-yellow-50 rounded-md border border-yellow-200 w-full max-w-4xl",children:[(0,i.jsxs)("p",{className:"text-sm text-yellow-800",children:["For the wizard: ",(0,i.jsx)(g(),{href:"/wizard?session=".concat(B()),className:"underline font-medium",children:"Click here"})," to open the wizard view or use the ",(0,i.jsx)(g(),{href:"/wizard-entrance",className:"underline font-medium",children:"Wizard Dashboard"})]}),(0,i.jsx)(t.$,{variant:"ghost",size:"sm",className:"mt-1 h-6 text-xs",onClick:()=>y(!1),children:"Dismiss"})]}),(0,i.jsxs)(h.tU,{defaultValue:"profile",className:"w-full max-w-4xl mt-6",children:[(0,i.jsxs)(h.j7,{className:"grid w-full grid-cols-3",children:[(0,i.jsx)(h.Xi,{value:"profile",children:"Customer Profile"}),(0,i.jsx)(h.Xi,{value:"moodboards",children:"Moodboards"}),(0,i.jsx)(h.Xi,{value:"recommendations",children:"Recommendations"})]}),(0,i.jsx)(h.av,{value:"profile",className:"mt-6",children:Z?(0,i.jsxs)(n.Zp,{children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsx)(n.ZB,{children:"Your Design Profile"}),(0,i.jsx)(n.BT,{children:"Based on your questionnaire responses"})]}),(0,i.jsx)(n.Wu,{className:"text-left",children:(0,i.jsx)("p",{children:Z})})]}):(0,i.jsx)("p",{children:"No profile information available yet."})}),(0,i.jsx)(h.av,{value:"moodboards",className:"mt-6",children:P&&P.length>0?(0,i.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:P.map(e=>(0,i.jsxs)(n.Zp,{className:"overflow-hidden",children:[(0,i.jsxs)(n.aR,{className:"pb-2",children:[(0,i.jsx)(n.ZB,{children:e.title}),(0,i.jsxs)(n.BT,{children:["Created by ","wizard"===e.createdBy?"Design Team":"AI"]})]}),(0,i.jsxs)(n.Wu,{children:[(0,i.jsx)("p",{className:"text-left text-sm mb-4",children:e.description}),(0,i.jsx)("div",{className:"grid grid-cols-2 gap-2",children:e.images.map((e,s)=>(0,i.jsx)("img",{src:e,alt:"Moodboard image ".concat(s+1),className:"w-full h-48 object-cover rounded-md shadow-sm"},s))})]})]},e.id))}):(0,i.jsxs)(n.Zp,{children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsx)(n.ZB,{children:"Moodboards Coming Soon"}),(0,i.jsx)(n.BT,{children:"Our design team is working on your moodboards"})]}),(0,i.jsx)(n.Wu,{children:(0,i.jsx)("p",{className:"text-center text-muted-foreground",children:"Based on your preferences, we're crafting unique moodboards just for you. Check back soon or provide additional feedback to help us understand your style better."})})]})}),(0,i.jsx)(h.av,{value:"recommendations",className:"mt-6",children:z&&z.length>0?(0,i.jsx)("div",{className:"space-y-4",children:z.map(e=>(0,i.jsxs)(n.Zp,{className:"overflow-hidden",children:[(0,i.jsx)(n.aR,{children:(0,i.jsx)(n.ZB,{children:e.item})}),(0,i.jsxs)(n.Wu,{children:[(0,i.jsx)("p",{className:"text-left mb-4",children:e.explanation}),e.imageUrl&&(0,i.jsx)("img",{src:e.imageUrl,alt:"Recommendation: ".concat(e.item),className:"w-full h-48 object-cover rounded-md shadow-md"})]})]},e.id))}):(0,i.jsx)("p",{children:"No recommendations available yet."})})]}),(0,i.jsx)("div",{className:"mt-8 w-full max-w-4xl",children:(0,i.jsxs)(n.Zp,{children:[(0,i.jsxs)(n.aR,{children:[(0,i.jsx)(n.ZB,{children:"Provide Feedback"}),(0,i.jsx)(n.BT,{children:"Help us refine your design recommendations"})]}),(0,i.jsx)(n.Wu,{children:(0,i.jsx)(o.lV,{...R,children:(0,i.jsxs)("form",{onSubmit:R.handleSubmit(S),className:"space-y-4",children:[(0,i.jsx)(o.zB,{control:R.control,name:"feedback",render:e=>{let{field:s}=e;return(0,i.jsxs)(o.eI,{children:[(0,i.jsx)(o.lR,{children:"Your Feedback"}),(0,i.jsx)(o.MJ,{children:(0,i.jsx)(c.T,{placeholder:"Tell us what you like or don't like about the recommendations, or any additional preferences...",className:"min-h-[120px]",...s})}),(0,i.jsx)(o.C5,{})]})}}),(0,i.jsx)(t.$,{type:"submit",className:"w-full",children:"Submit Feedback"})]})})})]})}),T&&T.length>0&&(0,i.jsx)("div",{className:"mt-8 w-full max-w-4xl",children:(0,i.jsxs)(n.Zp,{children:[(0,i.jsx)(n.aR,{children:(0,i.jsx)(n.ZB,{children:"Conversation History"})}),(0,i.jsx)(n.Wu,{children:(0,i.jsx)("div",{className:"space-y-4",children:T.map(e=>(0,i.jsxs)("div",{className:"p-4 rounded-lg ".concat(e.fromUser?"bg-primary/10 ml-8":"bg-secondary/10 mr-8"),children:[(0,i.jsx)("p",{className:"text-sm font-medium mb-1",children:e.fromUser?"You":"Design Team"}),(0,i.jsx)("p",{className:"text-left",children:e.content}),(0,i.jsx)("p",{className:"text-xs text-muted-foreground text-right mt-1",children:new Date(e.timestamp).toLocaleString()})]},e.id))})})]})})]})})}function N(){return(0,i.jsx)(r.Suspense,{fallback:(0,i.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:(0,i.jsxs)("main",{className:"flex flex-col items-center justify-center w-full flex-1 px-20 text-center",children:[(0,i.jsxs)("h1",{className:"text-4xl font-bold",children:["Loading ",(0,i.jsx)("span",{className:"text-primary",children:"Design Experience"})]}),(0,i.jsxs)("div",{className:"mt-8 space-y-4 w-full max-w-3xl",children:[(0,i.jsx)(u.E,{className:"h-12 w-full"}),(0,i.jsx)(u.E,{className:"h-48 w-full"}),(0,i.jsx)(u.E,{className:"h-48 w-full"})]})]})}),children:(0,i.jsx)(y,{})})}},6018:(e,s,a)=>{Promise.resolve().then(a.bind(a,763))},8856:(e,s,a)=>{"use strict";a.d(s,{E:()=>r});var i=a(5155),l=a(9434);function r(e){let{className:s,...a}=e;return(0,i.jsx)("div",{className:(0,l.cn)("animate-pulse rounded-md bg-muted",s),...a})}}},e=>{var s=s=>e(e.s=s);e.O(0,[3,820,874,473,437,441,684,358],()=>s(6018)),_N_E=e.O()}]);