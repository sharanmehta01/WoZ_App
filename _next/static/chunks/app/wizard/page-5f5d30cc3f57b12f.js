(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{793:(e,s,r)=>{Promise.resolve().then(r.bind(r,3722))},2523:(e,s,r)=>{"use strict";r.d(s,{p:()=>n});var l=r(5155),a=r(2115),i=r(9434);let n=a.forwardRef((e,s)=>{let{className:r,type:a,...n}=e;return(0,l.jsx)("input",{type:a,className:(0,i.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:s,...n})});n.displayName="Input"},3722:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>z});var l=r(5155),a=r(2115),i=r(6695),n=r(285),t=r(7313),d=r(2177),o=r(5594),c=r(221),m=r(5937),h=r(8539),x=r(2523),u=r(244),j=r(9434);let p=a.forwardRef((e,s)=>{let{className:r,children:a,...i}=e;return(0,l.jsxs)(u.bL,{ref:s,className:(0,j.cn)("relative overflow-hidden",r),...i,children:[(0,l.jsx)(u.LM,{className:"h-full w-full rounded-[inherit]",children:a}),(0,l.jsx)(g,{}),(0,l.jsx)(u.OK,{})]})});p.displayName=u.bL.displayName;let g=a.forwardRef((e,s)=>{let{className:r,orientation:a="vertical",...i}=e;return(0,l.jsx)(u.VM,{ref:s,orientation:a,className:(0,j.cn)("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 border-t border-t-transparent p-[1px]",r),...i,children:(0,l.jsx)(u.lr,{className:"relative flex-1 rounded-full bg-border"})})});g.displayName=u.VM.displayName;var f=r(3686),b=r(5695),v=r(596);let N=o.z.object({content:o.z.string().min(5,{message:"Response must be at least 5 characters"})}),w=o.z.object({title:o.z.string().min(3,{message:"Title must be at least 3 characters"}),description:o.z.string().min(10,{message:"Description must be at least 10 characters"}),image1:o.z.string().url({message:"Please enter a valid URL for image 1"}),image2:o.z.string().url({message:"Please enter a valid URL for image 2"}).optional(),image3:o.z.string().url({message:"Please enter a valid URL for image 3"}).optional(),image4:o.z.string().url({message:"Please enter a valid URL for image 4"}).optional()}),y=o.z.object({imageUrl:o.z.string().url({message:"Please enter a valid image URL"})});function R(){var e;let{sessionState:s,addFeedback:r,addMoodboard:o,updateRecommendationImage:u,loadSession:g}=(0,f.w)(),R=new URLSearchParams(window.location.search).get("session"),z=(0,b.useRouter)(),[C,B]=(0,a.useState)("conversation"),[U,L]=(0,a.useState)(null);(0,a.useEffect)(()=>{R?g(R):z.push("/wizard-entrance")},[R,g,z]);let I=(0,d.mN)({resolver:(0,c.u)(N),defaultValues:{content:""}}),k=(0,d.mN)({resolver:(0,c.u)(w),defaultValues:{title:"",description:"",image1:"",image2:"",image3:"",image4:""}}),M=(0,d.mN)({resolver:(0,c.u)(y),defaultValues:{imageUrl:""}});(0,a.useEffect)(()=>{s.customerProfile||(0,v.o)({title:"Loading session",description:"Waiting for session data to load..."})},[s.customerProfile]);let S=async e=>{try{r(e.content,!1),I.reset(),(0,v.o)({title:"Response sent",description:"Your response has been sent to the user."})}catch(e){console.error("Error submitting response:",e),(0,v.o)({title:"Error",description:"Failed to send your response.",variant:"destructive"})}},T=async e=>{try{let s=[e.image1,...e.image2?[e.image2]:[],...e.image3?[e.image3]:[],...e.image4?[e.image4]:[]];o({title:e.title,description:e.description,images:s,createdBy:"wizard"}),k.reset(),(0,v.o)({title:"Moodboard created",description:"The moodboard has been added to the user's view."})}catch(e){console.error("Error creating moodboard:",e),(0,v.o)({title:"Error",description:"Failed to create the moodboard.",variant:"destructive"})}},Z=async e=>{if(U)try{u(U,e.imageUrl),M.reset(),L(null),(0,v.o)({title:"Image added",description:"The image has been added to the recommendation."})}catch(e){console.error("Error adding image:",e),(0,v.o)({title:"Error",description:"Failed to add the image.",variant:"destructive"})}},{customerProfile:E,recommendations:P,feedback:W,moodboards:V}=s;return E?(0,l.jsxs)("div",{className:"container mx-auto py-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold",children:"Design Wizard Dashboard"}),(0,l.jsx)(n.$,{variant:"outline",size:"sm",onClick:()=>z.push("/wizard-entrance"),children:"Back to All Sessions"})]}),(0,l.jsxs)(t.tU,{value:C,onValueChange:B,className:"w-full",children:[(0,l.jsxs)(t.j7,{className:"grid w-full grid-cols-3",children:[(0,l.jsx)(t.Xi,{value:"customer",children:"Customer Profile"}),(0,l.jsx)(t.Xi,{value:"conversation",children:"Conversation"}),(0,l.jsx)(t.Xi,{value:"design",children:"Design Tools"})]}),(0,l.jsx)(t.av,{value:"customer",className:"mt-6",children:(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{children:[(0,l.jsx)(i.ZB,{children:"Customer Profile"}),(0,l.jsx)(i.BT,{children:"Based on questionnaire responses"})]}),(0,l.jsx)(i.Wu,{children:(0,l.jsx)(p,{className:"h-[60vh] pr-4",children:(0,l.jsx)("p",{className:"whitespace-pre-line",children:E})})})]})}),(0,l.jsx)(t.av,{value:"conversation",className:"mt-6",children:(0,l.jsxs)(i.Zp,{children:[(0,l.jsx)(i.aR,{children:(0,l.jsx)(i.ZB,{children:"Conversation with Customer"})}),(0,l.jsx)(i.Wu,{children:(0,l.jsx)(p,{className:"h-[50vh] pr-4",children:(0,l.jsx)("div",{className:"space-y-4",children:W.length>0?W.map(e=>(0,l.jsxs)("div",{className:(0,j.cn)("p-4 rounded-lg",e.fromUser?"bg-secondary/10 mr-8":"bg-primary/10 ml-8"),children:[(0,l.jsx)("p",{className:"text-sm font-medium mb-1",children:e.fromUser?"Customer":"You (Design Team)"}),(0,l.jsx)("p",{children:e.content}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground text-right mt-1",children:new Date(e.timestamp).toLocaleString()})]},e.id)):(0,l.jsx)("p",{className:"text-center text-muted-foreground",children:"No conversation yet. The customer will send feedback soon."})})})}),(0,l.jsx)(i.wL,{children:(0,l.jsx)(m.lV,{...I,children:(0,l.jsxs)("form",{onSubmit:I.handleSubmit(S),className:"w-full space-y-2",children:[(0,l.jsx)(m.zB,{control:I.control,name:"content",render:e=>{let{field:s}=e;return(0,l.jsxs)(m.eI,{children:[(0,l.jsx)(m.lR,{children:"Your Response"}),(0,l.jsx)(m.MJ,{children:(0,l.jsx)(h.T,{placeholder:"Type your response to the customer...",className:"min-h-[100px]",...s})}),(0,l.jsx)(m.C5,{})]})}}),(0,l.jsx)(n.$,{type:"submit",className:"w-full",children:"Send Response"})]})})})]})}),(0,l.jsx)(t.av,{value:"design",className:"mt-6",children:(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-6",children:[(0,l.jsx)("div",{className:"md:col-span-6",children:(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{children:[(0,l.jsx)(i.ZB,{children:"Create Moodboard"}),(0,l.jsx)(i.BT,{children:"Add a new moodboard for the customer"})]}),(0,l.jsx)(i.Wu,{children:(0,l.jsx)(m.lV,{...k,children:(0,l.jsxs)("form",{onSubmit:k.handleSubmit(T),className:"space-y-4",children:[(0,l.jsx)(m.zB,{control:k.control,name:"title",render:e=>{let{field:s}=e;return(0,l.jsxs)(m.eI,{children:[(0,l.jsx)(m.lR,{children:"Moodboard Title"}),(0,l.jsx)(m.MJ,{children:(0,l.jsx)(x.p,{placeholder:"Enter a title...",...s})}),(0,l.jsx)(m.C5,{})]})}}),(0,l.jsx)(m.zB,{control:k.control,name:"description",render:e=>{let{field:s}=e;return(0,l.jsxs)(m.eI,{children:[(0,l.jsx)(m.lR,{children:"Description"}),(0,l.jsx)(m.MJ,{children:(0,l.jsx)(h.T,{placeholder:"Describe this moodboard...",className:"min-h-[80px]",...s})}),(0,l.jsx)(m.C5,{})]})}}),(0,l.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,l.jsx)(m.zB,{control:k.control,name:"image1",render:e=>{let{field:s}=e;return(0,l.jsxs)(m.eI,{children:[(0,l.jsx)(m.lR,{children:"Image 1 URL (required)"}),(0,l.jsx)(m.MJ,{children:(0,l.jsx)(x.p,{placeholder:"https://...",...s})}),(0,l.jsx)(m.C5,{})]})}}),(0,l.jsx)(m.zB,{control:k.control,name:"image2",render:e=>{let{field:s}=e;return(0,l.jsxs)(m.eI,{children:[(0,l.jsx)(m.lR,{children:"Image 2 URL (optional)"}),(0,l.jsx)(m.MJ,{children:(0,l.jsx)(x.p,{placeholder:"https://...",...s})}),(0,l.jsx)(m.C5,{})]})}}),(0,l.jsx)(m.zB,{control:k.control,name:"image3",render:e=>{let{field:s}=e;return(0,l.jsxs)(m.eI,{children:[(0,l.jsx)(m.lR,{children:"Image 3 URL (optional)"}),(0,l.jsx)(m.MJ,{children:(0,l.jsx)(x.p,{placeholder:"https://...",...s})}),(0,l.jsx)(m.C5,{})]})}}),(0,l.jsx)(m.zB,{control:k.control,name:"image4",render:e=>{let{field:s}=e;return(0,l.jsxs)(m.eI,{children:[(0,l.jsx)(m.lR,{children:"Image 4 URL (optional)"}),(0,l.jsx)(m.MJ,{children:(0,l.jsx)(x.p,{placeholder:"https://...",...s})}),(0,l.jsx)(m.C5,{})]})}})]}),(0,l.jsx)(n.$,{type:"submit",className:"w-full",children:"Create Moodboard"})]})})})]})}),(0,l.jsx)("div",{className:"md:col-span-6",children:(0,l.jsxs)(i.Zp,{children:[(0,l.jsxs)(i.aR,{children:[(0,l.jsx)(i.ZB,{children:"Recommendations"}),(0,l.jsx)(i.BT,{children:"Add images to recommendations"})]}),(0,l.jsxs)(i.Wu,{children:[(0,l.jsx)(p,{className:"h-[50vh] pr-4",children:(0,l.jsx)("div",{className:"space-y-4",children:P.length>0?P.map(e=>(0,l.jsxs)(i.Zp,{className:"overflow-hidden",children:[(0,l.jsx)(i.aR,{className:"pb-2",children:(0,l.jsx)(i.ZB,{className:"text-lg",children:e.item})}),(0,l.jsxs)(i.Wu,{className:"pb-2",children:[(0,l.jsx)("p",{className:"text-sm mb-3",children:e.explanation}),e.imageUrl?(0,l.jsxs)("div",{children:[(0,l.jsx)("img",{src:e.imageUrl,alt:e.item,className:"w-full h-36 object-cover rounded-md"}),(0,l.jsx)(n.$,{variant:"outline",size:"sm",className:"mt-2 w-full",onClick:()=>{L(e.id),M.setValue("imageUrl",e.imageUrl||"")},children:"Change Image"})]}):(0,l.jsx)(n.$,{variant:"outline",className:"w-full",onClick:()=>L(e.id),children:"Add Image"})]})]},e.id)):(0,l.jsx)("p",{className:"text-center text-muted-foreground",children:"No recommendations available yet."})})}),U&&(0,l.jsxs)("div",{className:"mt-4 p-4 border rounded-md",children:[(0,l.jsxs)("h3",{className:"text-sm font-medium mb-2",children:["Add/Change Image for ",null===(e=P.find(e=>e.id===U))||void 0===e?void 0:e.item]}),(0,l.jsx)(m.lV,{...M,children:(0,l.jsxs)("form",{onSubmit:M.handleSubmit(Z),className:"space-y-2",children:[(0,l.jsx)(m.zB,{control:M.control,name:"imageUrl",render:e=>{let{field:s}=e;return(0,l.jsxs)(m.eI,{children:[(0,l.jsx)(m.MJ,{children:(0,l.jsx)(x.p,{placeholder:"Enter image URL...",...s})}),(0,l.jsx)(m.C5,{})]})}}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(n.$,{type:"submit",size:"sm",children:"Save"}),(0,l.jsx)(n.$,{type:"button",variant:"outline",size:"sm",onClick:()=>{L(null),M.reset()},children:"Cancel"})]})]})})]})]})]})})]})})]}),(0,l.jsx)("div",{className:"fixed bottom-4 right-4",children:(0,l.jsx)(n.$,{onClick:()=>{window.open("".concat("/WoZ_App","/moodboards?session=").concat(s.id),"_blank")},variant:"secondary",children:"Open User View"})})]}):(0,l.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:(0,l.jsxs)(i.Zp,{className:"w-[400px]",children:[(0,l.jsxs)(i.aR,{children:[(0,l.jsx)(i.ZB,{children:"Loading Session"}),(0,l.jsx)(i.BT,{children:"Waiting for session data..."})]}),(0,l.jsxs)(i.Wu,{children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse mb-4"}),(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})]}),(0,l.jsx)(i.wL,{children:(0,l.jsx)(n.$,{onClick:()=>z.push("/wizard-entrance"),variant:"outline",className:"w-full",children:"Return to Wizard Entrance"})})]})})}function z(){return(0,l.jsx)(a.Suspense,{fallback:(0,l.jsx)("div",{className:"flex flex-col items-center justify-center min-h-screen py-2",children:(0,l.jsxs)(i.Zp,{className:"w-[400px]",children:[(0,l.jsxs)(i.aR,{children:[(0,l.jsx)(i.ZB,{children:"Loading Dashboard"}),(0,l.jsx)(i.BT,{children:"Please wait..."})]}),(0,l.jsxs)(i.Wu,{children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse mb-4"}),(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded animate-pulse"})]})]})}),children:(0,l.jsx)(R,{})})}}},e=>{var s=s=>e(e.s=s);e.O(0,[3,820,473,244,437,441,684,358],()=>s(793)),_N_E=e.O()}]);